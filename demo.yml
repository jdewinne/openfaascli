version: 1.0
provider:
  name: openfaas
  gateway: ${OPENFAAS_GATEWAY:-http://127.0.0.1:18080}
functions:
  stackpack-install-demo-stackpack:
    lang: dockerfile
    handler: ./stscli
    image: jdewinne/stscli:4.0.1-20
    environment:
      fprocess: /usr/bin/run.sh stackpack install demo-stackpack -p password notinuse
    environment_file:
      - ./stscli/cli-default.yml
      - ${CLI_OVERRIDE:-./stscli/cli-default.yml}
    secrets:
      - ${STS_PASSWORD:-sts-password}
  stackpack-install-health-forecast:
    lang: dockerfile
    handler: ./stscli
    image: jdewinne/stscli:4.0.1-20
    environment:
      fprocess: /usr/bin/run.sh stackpack install health-forecast
    environment_file:
      - ./stscli/cli-default.yml
      - ${CLI_OVERRIDE:-./stscli/cli-default.yml}
    secrets:
      - ${STS_PASSWORD:-sts-password}
  stackpack-upload-demo-stackpack:
    lang: dockerfile
    handler: ./stscli
    image: jdewinne/stscli:4.0.1-20
    environment:
      fprocess: /usr/bin/run.sh stackpack upload
    environment_file:
      - ./stscli/cli-default.yml
      - ${CLI_OVERRIDE:-./stscli/cli-default.yml}
      - ./stscli/stackpack-default.yml
      - ${STACKPACK_OVERRIDE:-./stscli/stackpack-default.yml}
    secrets:
      - ${STS_PASSWORD:-sts-password}
      - ${ARTIFACTORY_PASSWORD:-artifactory-password}