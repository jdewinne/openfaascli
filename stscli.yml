version: 1.0
provider:
  name: openfaas
  gateway: ${OPENFAAS_GATEWAY:-http://127.0.0.1:18080}
functions:
  list-stackpacks:
    lang: dockerfile
    handler: ./stscli
    image: jdewinne/stscli:4.0.1-10
    environment:
      fprocess: /usr/bin/run.sh stackpack list
    environment_file:
      - ./stscli/cli-default.yml
      - ${CLI_OVERRIDE:-./stscli/cli-default.yml}
    secrets:
      - ${STS_PASSWORD:-sts-password}
  delete-all-data:
    lang: dockerfile
    handler: ./stscli
    image: jdewinne/stscli:4.0.1-10
    environment:
      fprocess: /usr/bin/run.sh graph delete --all
    environment_file:
      - ./stscli/cli-default.yml
      - ${CLI_OVERRIDE:-./stscli/cli-default.yml}
    secrets:
      - ${STS_PASSWORD:-sts-password}
      
